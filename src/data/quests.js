// Quest definitions — Defense of Rhaud
// Static quest data. Runtime state lives in registry 'questState'.

export const QUEST_DEFS = {
  // ──── Act I Main Quests ────

  act1_defend_frontier: {
    id: 'act1_defend_frontier',
    name: 'Defend the Frontier',
    act: 1,
    type: 'main',
    giver: 'metz',
    giverName: 'Captain Metz',
    description: 'The frontier is under siege. Defeat 5 skeleton patrols in the farmlands to secure the area.',
    objectives: [
      { id: 'defeat_skeleton_patrols', type: 'defeat_count', target: 'skeleton_group', description: 'Defeat skeleton patrols', required: 5 },
    ],
    prereqs: [],
    rewards: { gold: 50, xp: 40, items: [], unlocks: [] },
    acceptDialogue: ['The farmlands are crawling with skeleton patrols. We need to drive them back.'],
    completeDialogue: ['Five patrols routed. The farmlands are safer, but the fight is far from over.'],
    tracked: true,
    sortOrder: 50,
  },

  act1_secure_farmlands: {
    id: 'act1_secure_farmlands',
    name: 'Secure the Asvam Farmlands',
    act: 1,
    type: 'main',
    giver: 'auto',
    giverName: 'Captain Metz',
    description: 'The farmlands south of Bracken are overrun. Push into the area, find the ranger Lyra, and destroy the Bone Reaper terrorizing the settlers.',
    objectives: [
      { id: 'reach_farmlands', type: 'reach_location', target: 'asvam_farmlands', description: 'Reach the Asvam Farmlands', required: 1 },
      { id: 'talk_lyra', type: 'talk_npc', target: 'lyra', description: 'Speak with Lyra', required: 1 },
      { id: 'defeat_bone_reaper', type: 'defeat_enemy', target: 'ow_bone_reaper', description: 'Defeat the Bone Reaper', required: 1 },
    ],
    prereqs: [],
    rewards: { gold: 80, xp: 50, items: [], unlocks: [] },
    acceptDialogue: ['The farmlands to the south are crawling with undead. We need to secure the area and find any survivors.'],
    completeDialogue: ['The farmlands are secured. Lyra\'s knowledge of the frontier will prove invaluable.'],
    tracked: true,
    sortOrder: 100,
  },

  act1_secure_bracken: {
    id: 'act1_secure_bracken',
    name: 'Secure Fort Bracken',
    act: 1,
    type: 'main',
    giver: 'auto',
    giverName: 'Captain Metz',
    description: 'Journey to Fort Bracken and search for survivors.',
    objectives: [
      { id: 'reach_bracken', type: 'reach_location', target: 'bracken', description: 'Journey to Fort Bracken', required: 1 },
      { id: 'talk_rivin', type: 'talk_npc', target: 'rivin', description: 'Search for survivors', required: 1 },
    ],
    prereqs: ['act1_secure_farmlands'],
    rewards: { gold: 40, xp: 30, items: [], unlocks: [] },
    acceptDialogue: ['Fort Bracken lies to the north. If we can take it back, we\'ll have a base of operations.'],
    completeDialogue: ['Survivors found. Rivin holds the line, but the town must be cleared.'],
    tracked: true,
    sortOrder: 200,
  },

  act1_clear_bracken: {
    id: 'act1_clear_bracken',
    name: 'Clear the Town',
    act: 1,
    type: 'main',
    giver: 'auto',
    giverName: 'Rivin',
    description: 'Bracken is overrun with skeleton patrols. Clear them out so Rivin can join the fight for the fort.',
    objectives: [
      { id: 'clear_bracken_patrols', type: 'defeat_count', target: 'skeleton_group', description: 'Defeat skeleton patrols in Bracken', required: 5 },
    ],
    prereqs: ['act1_secure_bracken'],
    rewards: { gold: 80, xp: 50, items: [], unlocks: [] },
    acceptDialogue: ['The town is crawling with undead. Clear the skeleton patrols so we can retake the fort.'],
    completeDialogue: ['The patrols are routed. Time to take the fight to the gate.'],
    tracked: true,
    sortOrder: 210,
  },

  act1_retake_bracken: {
    id: 'act1_retake_bracken',
    name: 'Retake Fort Bracken',
    act: 1,
    type: 'main',
    giver: 'auto',
    giverName: 'Captain Metz',
    description: 'The skeleton patrols are cleared. Defeat the Skeletal Captain holding the gate to liberate Fort Bracken.',
    objectives: [
      { id: 'defeat_skeletal_captain', type: 'defeat_enemy', target: 'skeletal_captain', description: 'Defeat the Skeletal Captain', required: 1 },
    ],
    prereqs: ['act1_clear_bracken'],
    rewards: { gold: 120, xp: 80, items: [], unlocks: [] },
    acceptDialogue: ['The patrols are done. Now we take the gate.'],
    completeDialogue: ['Fort Bracken is ours again. Rivin\'s blade will strengthen our ranks.'],
    tracked: true,
    sortOrder: 220,
  },

  act1_liberate_catacombs: {
    id: 'act1_liberate_catacombs',
    name: 'Liberate the Catacombs',
    act: 1,
    type: 'main',
    giver: 'auto',
    giverName: 'Captain Tertullian',
    description: 'Search for survivors east of the river and clear the catacombs of the necromantic threat.',
    objectives: [
      { id: 'talk_rickets', type: 'talk_npc', target: 'rickets', description: 'Search for survivors east of the river', required: 1 },
      { id: 'defeat_vampirling_hal', type: 'defeat_enemy', target: 'vampirling_hal', description: 'Defeat Vampirling Hal', required: 1 },
    ],
    prereqs: ['act1_retake_bracken'],
    rewards: { gold: 150, xp: 100, items: [], unlocks: [] },
    acceptDialogue: ['The catacombs are the heart of the corruption in this region. We go in and cut it out.'],
    completeDialogue: ['Vampirling Hal is destroyed. The catacombs grow quiet — for now.'],
    tracked: true,
    sortOrder: 300,
  },

  act1_news_of_atikesh: {
    id: 'act1_news_of_atikesh',
    name: 'News of Atikesh',
    act: 1,
    type: 'main',
    giver: 'auto',
    giverName: 'Captain Metz',
    description: 'Return to Captain Tertullian at Fort Bracken with news of the vampire lord Atikesh.',
    objectives: [
      { id: 'return_to_tertullian', type: 'reach_location', target: 'bracken', description: 'Return to Captain Tertullian', required: 1 },
    ],
    prereqs: ['act1_liberate_catacombs'],
    rewards: { gold: 80, xp: 60, items: [], unlocks: [] },
    acceptDialogue: ['We must report back to Captain Tertullian with what we\'ve learned about Atikesh.'],
    completeDialogue: ['Captain Tertullian has been informed of the vampire lord Atikesh.'],
    tracked: true,
    sortOrder: 350,
  },

  act1_from_the_ashes: {
    id: 'act1_from_the_ashes',
    name: 'From the Ashes',
    act: 1,
    type: 'main',
    giver: 'auto',
    giverName: 'Captain Metz',
    description: 'Bracken is liberated but broken. Help the townsfolk rebuild by completing their requests.',
    objectives: [
      { id: 'complete_what_goes_around', type: 'complete_quest', target: 'act1_what_goes_around', description: 'Help Garren Brightone', required: 1 },
      { id: 'complete_at_the_ready', type: 'complete_quest', target: 'act1_at_the_ready', description: 'Help Sgt. Fillian', required: 1 },
      { id: 'complete_bought_with_blood', type: 'complete_quest', target: 'act1_bought_with_blood', description: 'Help Farmer Harold', required: 1 },
      { id: 'complete_not_so_lone_wolf', type: 'complete_quest', target: 'act1_not_so_lone_wolf', description: 'Help Ranger Veera', required: 1 },
      { id: 'complete_old_nans', type: 'complete_quest', target: 'act1_old_nans', description: 'Help Innkeeper Twill', required: 1 },
    ],
    prereqs: ['act1_news_of_atikesh'],
    rewards: { gold: 200, xp: 150, items: [], unlocks: [] },
    acceptDialogue: ['Bracken stands, but barely. The people need our help to rebuild.'],
    completeDialogue: ['Bracken is restored. The people stand ready for whatever comes next.'],
    tracked: true,
    sortOrder: 400,
  },

  act1_what_goes_around: {
    id: 'act1_what_goes_around',
    name: 'What Goes Around...',
    act: 1,
    type: 'side',
    giver: 'auto',
    giverName: 'Garren Brightone',
    description: 'Garren Brightone, a Bracken merchant, has had his strongbox stolen by bandits. Track down the bandit chief Bjorn and recover the goods.',
    objectives: [
      { id: 'talk_garren', type: 'talk_npc', target: 'garren', description: 'Speak with Garren Brightone', required: 1 },
      { id: 'defeat_bjorn', type: 'defeat_enemy', target: 'bandit_chief_bjorn', description: 'Defeat Bandit Chief Bjorn', required: 1 },
    ],
    prereqs: ['act1_news_of_atikesh'],
    rewards: { gold: 80, xp: 60, items: [], unlocks: [] },
    acceptDialogue: [
      'Garren: "Captain! Thank the stars you\'re here. A band of brigands ransacked my storehouse while the town was under siege."',
      'Garren: "Their leader — a brute called Bjorn — took my strongbox southeast of town. Everything I had was in there."',
      'Garren: "Without those goods, I can\'t supply the rebuilding effort. Please, deal with him."',
    ],
    completeDialogue: ['Garren: "You\'ve done it! Bjorn won\'t be troubling Bracken again. Here — take this as thanks."'],
    tracked: true,
    sortOrder: 410,
  },

  act1_at_the_ready: {
    id: 'act1_at_the_ready',
    name: 'At the Ready!',
    act: 1,
    type: 'side',
    giver: 'auto',
    giverName: 'Sgt. Fillian',
    description: 'Sgt. Fillian needs help training the new town guard. Speak with him and then train 15 guardsmen around Bracken.',
    objectives: [
      { id: 'talk_fillian', type: 'talk_npc', target: 'fillian', description: 'Speak with Sgt. Fillian', required: 1 },
      { id: 'train_guardsmen', type: 'talk_npc', target: 'town_guardsman', description: 'Train town guardsmen', required: 15 },
    ],
    prereqs: ['act1_news_of_atikesh'],
    rewards: { gold: 60, xp: 50, items: [], unlocks: [] },
    acceptDialogue: [
      'Fillian: "Captain Metz, sir! Sgt. Fillian, acting watch commander."',
      'Fillian: "We\'ve got fresh recruits coming in from the countryside, but they can barely hold a blade straight."',
      'Fillian: "I could use a veteran\'s hand. Would you drill some of the lads posted around town?"',
    ],
    completeDialogue: ['Fillian: "Fifteen trained and standing tall! Bracken\'s watch is reformed, sir. You have my thanks."'],
    tracked: true,
    sortOrder: 420,
  },

  act1_bought_with_blood: {
    id: 'act1_bought_with_blood',
    name: 'Bought with Blood',
    act: 1,
    type: 'side',
    giver: 'auto',
    giverName: 'Farmer Harold',
    description: 'Farmer Harold\'s land west of Bracken has been overrun by a feral wolf pack. Clear them out so he can return to his farm.',
    objectives: [
      { id: 'talk_harold', type: 'talk_npc', target: 'harold', description: 'Speak with Farmer Harold', required: 1 },
      { id: 'defeat_wolf_pack', type: 'defeat_enemy', target: 'ow_wolf_pack_harold', description: 'Defeat the wolf pack at Harold\'s farm', required: 1 },
    ],
    prereqs: ['act1_news_of_atikesh'],
    rewards: { gold: 70, xp: 55, items: [], unlocks: [] },
    acceptDialogue: [
      'Harold: "You look like a man who\'s fought a thing or two."',
      'Harold: "My farm\'s west of here. Wolves moved in during the siege — big ones, mean ones."',
      'Harold: "I can\'t go back until they\'re cleared out. My whole livelihood is in that soil."',
    ],
    completeDialogue: ['Harold: "The wolves are gone? Bless you, captain. I\'ll have crops in the ground by week\'s end."'],
    tracked: true,
    sortOrder: 430,
  },

  act1_not_so_lone_wolf: {
    id: 'act1_not_so_lone_wolf',
    name: 'Not-So-Lone Wolf',
    act: 1,
    type: 'side',
    giver: 'auto',
    giverName: 'Ranger Veera',
    description: 'Ranger Veera reports dire wolf packs roaming dangerously close to Bracken. Thin their numbers by defeating 10 dire wolves.',
    objectives: [
      { id: 'talk_veera', type: 'talk_npc', target: 'veera', description: 'Speak with Ranger Veera', required: 1 },
      { id: 'defeat_dire_wolves', type: 'defeat_count', target: 'dire_wolf', description: 'Defeat dire wolves', required: 10 },
    ],
    prereqs: ['act1_news_of_atikesh'],
    rewards: { gold: 90, xp: 70, items: [], unlocks: [] },
    acceptDialogue: [
      'Veera: "You must be Metz. Word of your deeds has spread."',
      'Veera: "The dire wolves are getting bolder. Packs of them prowl the roads at night."',
      'Veera: "I need someone to thin the pack. Ten kills should break their nerve and send them back to the deep woods."',
    ],
    completeDialogue: ['Veera: "Ten down. The pack will think twice about coming this close to Bracken again. Well fought."'],
    tracked: true,
    sortOrder: 440,
  },

  act1_old_nans: {
    id: 'act1_old_nans',
    name: "Old Nan's",
    act: 1,
    type: 'side',
    giver: 'auto',
    giverName: 'Innkeeper Twill',
    description: 'Innkeeper Twill needs a jar of Old Nan\'s Honey from the abandoned farmstead northwest of town to get the inn running again.',
    objectives: [
      { id: 'talk_twill', type: 'talk_npc', target: 'twill', description: 'Speak with Innkeeper Twill', required: 1 },
      { id: 'collect_honey', type: 'collect_item', target: 'old_nans_honey', description: "Collect Old Nan's Honey", required: 1 },
    ],
    prereqs: ['act1_news_of_atikesh'],
    rewards: { gold: 50, xp: 40, items: [], unlocks: [] },
    acceptDialogue: [
      'Twill: "Captain! The inn\'s still standing, but the larder is bare."',
      'Twill: "Old Nan used to keep bees at her farmstead northwest of here. Best honey in the frontier."',
      'Twill: "If you could fetch a jar, I\'d have the inn serving warm mead by nightfall."',
    ],
    completeDialogue: ['Twill: "Old Nan\'s finest! The inn will be the heart of Bracken once more. Thank you, captain."'],
    tracked: true,
    sortOrder: 450,
  },

  // ──── Act I Side Quests ────

  act1_thin_the_horde: {
    id: 'act1_thin_the_horde',
    name: 'Thin the Horde',
    act: 1,
    type: 'side',
    giver: 'auto',
    giverName: 'Eastern Watch',
    description: 'The skeleton patrols grow bolder each day. Thin their numbers to slow Atikesh\'s advance.',
    objectives: [
      { id: 'kill_skeletons', type: 'defeat_count', target: 'skeleton', description: 'Defeat skeletons', required: 10 },
    ],
    prereqs: [],
    rewards: { gold: 100, xp: 60, items: [], unlocks: [] },
    acceptDialogue: ['Skeleton patrols are everywhere. Every one you destroy buys the frontier more time.'],
    completeDialogue: ['Ten skeletons felled. The cursed lands are quieter... for now.'],
    tracked: true,
    sortOrder: 500,
  },

  act1_wolves_at_the_door: {
    id: 'act1_wolves_at_the_door',
    name: 'Wolves at the Door',
    act: 1,
    type: 'side',
    giver: 'auto',
    giverName: 'Eastern Watch',
    description: 'Corrupted dire wolves are terrorizing the frontier roads. Put them down before they claim more lives.',
    objectives: [
      { id: 'kill_wolves', type: 'defeat_count', target: 'dire_wolf', description: 'Defeat dire wolves', required: 8 },
    ],
    prereqs: [],
    rewards: { gold: 80, xp: 50, items: [], unlocks: [] },
    acceptDialogue: ['Dire wolves haunt the roads and farmlands. They need to be culled.'],
    completeDialogue: ['Eight dire wolves slain. The roads are safer — for now.'],
    tracked: true,
    sortOrder: 600,
  },
};
