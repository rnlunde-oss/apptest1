// Quest definitions — Defense of Rhaud
// Static quest data. Runtime state lives in registry 'questState'.

export const QUEST_DEFS = {
  // ──── Act I Main Quests ────

  act1_defend_frontier: {
    id: 'act1_defend_frontier',
    name: 'Defend the Frontier',
    act: 1,
    type: 'main',
    giver: 'metz',
    giverName: 'Captain Metz',
    description: 'The frontier is under siege. Defeat 5 skeleton patrols in the farmlands to secure the area.',
    objectives: [
      { id: 'defeat_skeleton_patrols', type: 'defeat_count', target: 'skeleton_group', description: 'Defeat skeleton patrols', required: 5 },
    ],
    prereqs: [],
    rewards: { gold: 50, xp: 40, items: [], unlocks: [] },
    acceptDialogue: ['The farmlands are crawling with skeleton patrols. We need to drive them back.'],
    completeDialogue: ['Five patrols routed. The farmlands are safer, but the fight is far from over.'],
    tracked: true,
    sortOrder: 50,
  },

  act1_secure_farmlands: {
    id: 'act1_secure_farmlands',
    name: 'Secure the Asvam Farmlands',
    act: 1,
    type: 'main',
    giver: 'auto',
    giverName: 'Captain Metz',
    description: 'The farmlands south of Bracken are overrun. Push into the area, find the ranger Lyra, and destroy the Bone Reaper terrorizing the settlers.',
    objectives: [
      { id: 'reach_farmlands', type: 'reach_location', target: 'asvam_farmlands', description: 'Reach the Asvam Farmlands', required: 1 },
      { id: 'talk_lyra', type: 'talk_npc', target: 'lyra', description: 'Speak with Lyra', required: 1 },
      { id: 'defeat_bone_reaper', type: 'defeat_enemy', target: 'ow_bone_reaper', description: 'Defeat the Bone Reaper', required: 1 },
    ],
    prereqs: [],
    rewards: { gold: 80, xp: 50, items: [], unlocks: [] },
    acceptDialogue: ['The farmlands to the south are crawling with undead. We need to secure the area and find any survivors.'],
    completeDialogue: ['The farmlands are secured. Lyra\'s knowledge of the frontier will prove invaluable.'],
    tracked: true,
    sortOrder: 100,
  },

  act1_secure_bracken: {
    id: 'act1_secure_bracken',
    name: 'Secure Fort Bracken',
    act: 1,
    type: 'main',
    giver: 'auto',
    giverName: 'Captain Metz',
    description: 'Journey to Fort Bracken and search for survivors.',
    objectives: [
      { id: 'reach_bracken', type: 'reach_location', target: 'bracken', description: 'Journey to Fort Bracken', required: 1 },
      { id: 'talk_rivin', type: 'talk_npc', target: 'rivin', description: 'Search for survivors', required: 1 },
    ],
    prereqs: ['act1_secure_farmlands'],
    rewards: { gold: 40, xp: 30, items: [], unlocks: [] },
    acceptDialogue: ['Fort Bracken lies to the north. If we can take it back, we\'ll have a base of operations.'],
    completeDialogue: ['Survivors found. Rivin holds the line, but the town must be cleared.'],
    tracked: true,
    sortOrder: 200,
  },

  act1_clear_bracken: {
    id: 'act1_clear_bracken',
    name: 'Clear the Town',
    act: 1,
    type: 'main',
    giver: 'auto',
    giverName: 'Rivin',
    description: 'Bracken is overrun with skeleton patrols. Clear them out so Rivin can join the fight for the fort.',
    objectives: [
      { id: 'clear_bracken_patrols', type: 'defeat_count', target: 'skeleton_group', description: 'Defeat skeleton patrols in Bracken', required: 5 },
    ],
    prereqs: ['act1_secure_bracken'],
    rewards: { gold: 80, xp: 50, items: [], unlocks: [] },
    acceptDialogue: ['The town is crawling with undead. Clear the skeleton patrols so we can retake the fort.'],
    completeDialogue: ['The patrols are routed. Time to take the fight to the gate.'],
    tracked: true,
    sortOrder: 210,
  },

  act1_retake_bracken: {
    id: 'act1_retake_bracken',
    name: 'Retake Fort Bracken',
    act: 1,
    type: 'main',
    giver: 'auto',
    giverName: 'Captain Metz',
    description: 'The skeleton patrols are cleared. Defeat the Skeletal Captain holding the gate to liberate Fort Bracken.',
    objectives: [
      { id: 'defeat_skeletal_captain', type: 'defeat_enemy', target: 'skeletal_captain', description: 'Defeat the Skeletal Captain', required: 1 },
    ],
    prereqs: ['act1_clear_bracken'],
    rewards: { gold: 120, xp: 80, items: [], unlocks: [] },
    acceptDialogue: ['The patrols are done. Now we take the gate.'],
    completeDialogue: ['Fort Bracken is ours again. Rivin\'s blade will strengthen our ranks.'],
    tracked: true,
    sortOrder: 220,
  },

  act1_liberate_catacombs: {
    id: 'act1_liberate_catacombs',
    name: 'Liberate the Catacombs',
    act: 1,
    type: 'main',
    giver: 'auto',
    giverName: 'Captain Metz',
    description: 'The ancient catacombs northeast of Bracken are a source of Atikesh\'s power. Delve in, find the wizard Rickets, and destroy the Wight Commander.',
    objectives: [
      { id: 'reach_catacombs', type: 'reach_location', target: 'catacombs', description: 'Enter the Catacombs', required: 1 },
      { id: 'talk_rickets', type: 'talk_npc', target: 'rickets', description: 'Speak with Rickets', required: 1 },
      { id: 'defeat_wight_commander', type: 'defeat_enemy', target: 'wight_commander', description: 'Defeat the Wight Commander', required: 1 },
    ],
    prereqs: ['act1_retake_bracken'],
    rewards: { gold: 150, xp: 100, items: [], unlocks: [] },
    acceptDialogue: ['The catacombs are the heart of the corruption in this region. We go in and cut it out.'],
    completeDialogue: ['The Wight Commander is destroyed. The catacombs grow quiet — for now.'],
    tracked: true,
    sortOrder: 300,
  },

  act1_running_from_fate: {
    id: 'act1_running_from_fate',
    name: 'Running from Fate',
    act: 1,
    type: 'main',
    giver: 'auto',
    giverName: 'Captain Metz',
    description: 'Rumors speak of a scholar named Tertullian who knows the source of Atikesh\'s power, and a deserter called Sivin who may know a path through the cursed lands.',
    objectives: [
      { id: 'talk_tertullian', type: 'talk_npc', target: 'tertullian', description: 'Speak with Tertullian', required: 1 },
      { id: 'talk_sivin', type: 'talk_npc', target: 'sivin', description: 'Speak with Sivin', required: 1 },
      { id: 'reach_dungeon', type: 'reach_location', target: 'dungeon', description: 'Enter the dungeon', required: 1 },
    ],
    prereqs: ['act1_liberate_catacombs'],
    rewards: { gold: 100, xp: 80, items: [], unlocks: [] },
    acceptDialogue: ['We need answers. There are people out there who know more about this curse than we do.'],
    completeDialogue: ['The path forward is clear. The real fight begins now.'],
    tracked: true,
    sortOrder: 400,
  },

  // ──── Act I Side Quests ────

  act1_thin_the_horde: {
    id: 'act1_thin_the_horde',
    name: 'Thin the Horde',
    act: 1,
    type: 'side',
    giver: 'auto',
    giverName: 'Eastern Watch',
    description: 'The skeleton patrols grow bolder each day. Thin their numbers to slow Atikesh\'s advance.',
    objectives: [
      { id: 'kill_skeletons', type: 'defeat_count', target: 'skeleton', description: 'Defeat skeletons', required: 10 },
    ],
    prereqs: [],
    rewards: { gold: 100, xp: 60, items: [], unlocks: [] },
    acceptDialogue: ['Skeleton patrols are everywhere. Every one you destroy buys the frontier more time.'],
    completeDialogue: ['Ten skeletons felled. The cursed lands are quieter... for now.'],
    tracked: true,
    sortOrder: 500,
  },

  act1_wolves_at_the_door: {
    id: 'act1_wolves_at_the_door',
    name: 'Wolves at the Door',
    act: 1,
    type: 'side',
    giver: 'auto',
    giverName: 'Eastern Watch',
    description: 'Corrupted dire wolves are terrorizing the frontier roads. Put them down before they claim more lives.',
    objectives: [
      { id: 'kill_wolves', type: 'defeat_count', target: 'dire_wolf', description: 'Defeat dire wolves', required: 8 },
    ],
    prereqs: [],
    rewards: { gold: 80, xp: 50, items: [], unlocks: [] },
    acceptDialogue: ['Dire wolves haunt the roads and farmlands. They need to be culled.'],
    completeDialogue: ['Eight dire wolves slain. The roads are safer — for now.'],
    tracked: true,
    sortOrder: 600,
  },
};
